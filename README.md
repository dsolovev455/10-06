# Домашнее задание к занятию 10.6 "`Disaster recovery`" - `Соловьев Д.В`

### Инструкция по выполнению домашнего задания
1. Сделайте fork [репозитория c шаблоном решения](https://github.com/netology-code/sys-pattern-homework) к себе в Github и переименуйте его по названию или номеру занятия, например, https://github.com/имя-вашего-репозитория/gitlab-hw или https://github.com/имя-вашего-репозитория/8-03-hw).
2. Выполните клонирование этого репозитория к себе на ПК с помощью команды `git clone`.
3. Выполните домашнее задание и заполните у себя локально этот файл README.md:
   - впишите вверху название занятия и ваши фамилию и имя;
   - в каждом задании добавьте решение в требуемом виде: текст/код/скриншоты/ссылка;
   - для корректного добавления скриншотов воспользуйтесь инструкцией [«Как вставить скриншот в шаблон с решением»](https://github.com/netology-code/sys-pattern-homework/blob/main/screen-instruction.md);
   - при оформлении используйте возможности языка разметки md. Коротко об этом можно посмотреть в [инструкции по MarkDown](https://github.com/netology-code/sys-pattern-homework/blob/main/md-instruction.md).
4. После завершения работы над домашним заданием сделайте коммит (`git commit -m "comment"`) и отправьте его на Github (`git push origin`).
5. Для проверки домашнего задания преподавателем в личном кабинете прикрепите и отправьте ссылку на решение в виде md-файла в вашем Github.
6. Любые вопросы задавайте в чате учебной группы и/или в разделе «Вопросы по заданию» в личном кабинете.

Желаем успехов в выполнении домашнего задания!

---

### Задание 1

В чём разница между DRaaS, BaaS, Active-Active, Active-Passive?

*Приведите ответ в свободной форме.*

#### ОТВЕТ:

DRaaS — это облачная служба, которая предоставляет предприятиям возможность быстро восстанавливать ИТ-системы и данные в случае стихийного бедствия, такого как природная катастрофа, кибератака или отказ оборудования. DRaaS представляет клиенту более широкий спектр услуг по созданию отказоустойчивости и резервирования. Перечень предоставляемых услуг может варьироваться в зависимости от желаний заказчика и возможностей вендора на этой платформе. В максимальном обьёме инженеры компаании которая предоставляет услуги DRaaS производят работы по репликации и разворачиванию вашей инфраструктуры на собственных мощностях оборудования, на которые можно переключить сервис в случае инцидента. Это позволяет предприятиям быстро восстанавливаться после сбоя и минимизировать время простоя, но в токой вид резервирования в целом стоит больших денег и зачастую не может обеспечить достаточный уровень приватности защищаемых данных(утечки могут происходить через сети вендора DRaaS). Эта технологию лучше всего применять для поддержания работоспособности крупного онлайн сервиса - не связанного какими то особыми условиями конфиденциальности обрабатываемых им данных. Он обеспечивает должный уровень резервирования при отсутствии необходимости держать собственный штат специалистов и резервные мощности на случай инцидента.

BaaS — это облачная служба, которая предоставляет предприятиям безопасное удаленное место для хранения(и иногда удобный API для обеспечения автоматизации этой услуги) и защиты своих данных.
Это может включать в себя все: резервные копии критически важных, архив видеозаписей с камер видеонаблюдения, хранилище логов, а также бэкапы и дампы с критически важного инфраструктурного оборудования(комататоры, маршрутизаторы, фаэрволы и т.д.). Решения BaaS обычно включают автоматизированное резервное копирование и могут быть настроены в соответствии с конкретными требованиями к хранению данных. Восстановление инфраструктуры в условия этой услуги в основном не входит - т.е забирать бэкапы и разворачивать их обратно на железо придется собственному специалисту пострадавшей компании. Перечень стихийных бедствий от которых защищает эта услуга весьма ограничен(в основном это защита от внутренних сбоев ПО которые приводят к неработоспособности сервиса, "человеческий фактор" который в случае направильной эксплуатации ломает работу ПО, а также поломки оборудования на котором хранятся важные данные).
Хотя и DRaaS, и BaaS важны, они служат разным целям.
DRaaS ориентирован на аварийное восстановление сервиса, а BaaS — на резервирование данных.
Разным компаниям и разным инфраструктурам, может быть нужна только одна из этих услуг, в зависимости от их конкретных потребностей.

Двумя наиболее часто используемыми схемами резервирования являются: так называемыми "Active-Active" ("активный-активный") и "Active-Passive" ("активный-пассивный").
"Активный-активный" схема, при которой создаются два инстанса сервиса и разворачиваются они на разных ЦОД-ах для надежности или один инстанс развернут у заказчика на "железе", а другой развертывается в облаке. Между ними налажена синхронизация и они страхуют друг друга на случай аварии.
"Active-Passive" ("активный-пассивный") - это схема при которой работоспособая копия резервируемой инфраструктуры разворачивается и в штатной эксплуатации является неактивной, и при этом постоянно синхронизирует данные с рабочим инстансом. Инстанс дублер разворачивается в только в случае инцидента. Такая схема позволяет экономить на постоянной аренде рабочих ресурсов у провайдера если они не всегда нужны. При использовании схемы "активный-пассивный", может потребоваться некоторое время для включения/переключения в работу резервного узла.

---

### Задание 2

Компании нужно составить план восстановления в случае Disaster recovery. Сервер состоит из системного диска и диска с данными. 
Требуется копировать два логических диска на один физический: 
- системный диск (C:) (20 гигабайт);
- диск с данными (D:) (256 гигабайт). 

В требованиях говорится: 
- данные критичны в течение 24 часов после аварии;
- сеть критична к большим потокам данных в рабочее время;
- рабочее время с 9.00 до 18.00, пять дней (понедельник – пятница);
- план резервирования должен быть реализован для диска C и для диска D. В случае Linux-систем /dev/sda1, /dev/sda4 или /dev/sdb1-данные;
- считается, что для этой задачи может быть: 1) поставлен второй сервер или 2) выбрана облачная инфраструктура с определённой услугой;
- компания готова платить за 10 терабайт места как в одном, так и в другом случае.
 
*Приведите ответ в форме плана востановления с выбранным механизмом и получившейся топологией.*

#### ОТВЕТ:

На мой взгляд тут подойдет схема резервирования по типу "активный-пассивный" + BaaS, так как нам не настолько критично резервирование работоспособности/доступности сервера. DRaaS - тут нецелесообразно применять также по причине избыточности. В качестве плана резервирования для такой инфаструктуры я бы применил следующую схему:
1. В облаках я бы развернул виртуальную машину - дублер обладающую сопоставимым набором ресурсов.
2. Налаадил бы синхронизацию с нашим резервируемым сервером например используя R-Sync.
3. Виртуальный сервер при штатной эксплуатации включался бы каждый рабочий день по ночам, например начаная с 00:00 и производил синхронизацию/актуализацию информации с рабочим инстансом.
4. У того же провайдера заказал услугу BaaS на 10 Тб и настроил резервирование по схеме диференциаального копирования(воскресенье полный бэкап, остальные дни диференцииальные снимки) по расписанию каждый час в рабочее время например или выбрать большее квантование в зависимости от критичности данных. Резервирование настроено в API услуги в пассивный режим(т.е. наше API стучится на наш работающий сервер и запрашивает данные самостоятельно).
5. На случай инцидента обеспечил сетевую связанность/доступность всех участников рабочего процесса с "резервным сервером".
6. Поставил бы всех участников на мониторинг, настроил алерты и оповещения определенные участники инфраструктуры почему то не работают в нашем расписании.



План восстановления:

1. При получении оповещения о выходе из строя активного сервера включить резервный и обеспечить на него переключение всех пользователей или проверить автовключение по алерту.
2. Проверить сетевую связнанность всех участников инфраструктуры с нашим резервным сервером, если сервер упал в рабочее время отправить обновленные данные для подключения сотрудникам компании работающим с данными на этом сервере.
3. Если есть жалобы от сотрудников о неактуальности даных на сервере то попробовать восстановиться из резервной копии которая наиболее близка к актуальным данным.
4. Выявить причины аварии.
5. Устранить причины.
6. Восстановить работоспособность активного сервера.
8. По согласованию планово приостановить работу сервисов и пользователей, по возможности произвести переключение в неробочее время на нашем сервере(на время синхронизации и переключения).
9. Поднять второй "основной" сервер.
10. Синхронизировать данные между двумя серверами.
11. Произвести полное переключение пользователей сервиса на новый сервер.
12. Убедиться, что все работает.
13. Доработать инфаструктуру чтобы с следующий раз уменьшить вероятность такой аварии.

---

# Задания со звёздочкой*

Эти задания дополнительные. Их выполнять не обязательно. На зачёт это не повлияет. Вы можете их выполнить, если хотите глубже разобраться в материале.
 

### Задание 3*

Используя программу R-sync, составьте конфигурацию для выполнения прошлой задачи.

*Пришлите файл конфигурации.*
